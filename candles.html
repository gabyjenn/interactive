<!DOCTYPE html>
<html>
<head>
  <title>7 Candles</title>
  <style>
    /* Add styles for the candles here */
    .candle {
      width: 50px;
      height: 100px;
      background-color: gray;
      border-radius: 25px;
      display: inline-block;
      margin: 10px;
    }
    .candle.on {
      background-color: yellow;
    }
  </style>
</head>
<body>
  <div id="candles"></div>

  <script>
    // This function updates the candles based on the laptop status
    function updateCandles(status) {
      const candlesDiv = document.getElementById('candles');
      // Loop through the laptop status dictionary and update each candle
      for (const [person, isOn] of Object.entries(status)) {
        const candleDiv = document.createElement('div');
        candleDiv.classList.add('candle');
        if (isOn) {
          candleDiv.classList.add('on');
        }
        candlesDiv.appendChild(candleDiv);
      }
    }

    // This function updates the laptop status on the server
    function sendStatus(person, status) {
      fetch('/update_status', {
        method: 'POST',
        body: new URLSearchParams({person, status}),
      })
        .then(response => response.json())
        .then(status => updateCandles(status));
    }

    // Add event listeners to update the laptop status when the page is loaded
    // and when the user clicks on a candle
    window.addEventListener('load', () => {
      // Load the initial laptop status from the server
      fetch('/update_status')
        .then(response => response.json())
        .then(status => updateCandles(status));
    });
    document.addEventListener('click', event => {
      if (event.target.classList.contains('candle')) {
        const person = 'person' + (Array.from(event.target.parentNode.children).indexOf(event.target) + 1);
        const status = event.target.classList.contains('on') ? 'off' : 'on';
        sendStatus(person, status);
      }
    });
  </script>
</body>
</html>
